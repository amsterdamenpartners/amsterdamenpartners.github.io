var darkLayer = document.querySelector('.darkLayer');
var thumbnailArea = document.querySelector('.thumbnailRow.areas');
var thumbnailCompany = document.querySelector('.thumbnailRow.companies');
var imageContainer = document.querySelector('.living-gallery__image-container');

function changeContent(area) {

    var mapIntroduction = document.querySelector('.living-area__introduction');
    var areaTitle = document.querySelector('.living-area__title');
    var areaBlock = document.querySelector('.area-image__title');
    var areaBtn = document.querySelector('.visit__living-area');
    var areaList = document.querySelector('.living-area__features');
    var areaFeature = document.querySelectorAll('.living-area__features__item');
    //var galleryImage = document.querySelectorAll('.living-gallery__image');


    thumbnailArea.innerHTML = "";
    imageContainer.innerHTML = "";
    for (var i = 0; i < area.images.length; i++) {
        var thumbElement = document.createElement('div');
        thumbElement.className = 'thumbnailArea';
        thumbElement.style.backgroundImage = 'url(' + area.images[i] + ')';
        thumbElement.addEventListener("click", function (imageNumber) {
            return function () { showThumb(imageNumber); }
        }(i + 1));
        thumbnailArea.appendChild(thumbElement);

        var imageElement = document.createElement('div');
        imageElement.className = 'living-gallery__image';
        imageElement.style.backgroundImage = 'url(' + area.images[i] + ')';
        imageContainer.appendChild(imageElement);
    }
    

    thumbnailCompany.innerHTML = "";
    for (var j = 0; j < area.companies.length; j++) {
        var rowElement = document.createElement('a');
        rowElement.href = area.companies[j].url;
        rowElement.className = 'thumbnailCompany';
        rowElement.style.backgroundImage = 'url(' + area.companies[j].image + ')';
        thumbnailCompany.appendChild(rowElement);
    }


    mapIntroduction.style.display = 'none';
    darkLayer.style.mask = "url(#" + area.mask + ")";
    darkLayer.style.display = "block";
    darkLayer.style.opacity = ".25";

    areaTitle.innerText = area.text.title;
    areaBtn.style.display = "block";
    areaBtn.innerText = 'Discover ' + area.text.title;
    areaBtn.href = area.text.url;
    areaBtn.target = "_blank";
    areaList.style.display = 'block';
    areaBlock.style.display = 'inline-block';
    areaBlock.innerText = area.text.title;
    areaFeature[0].innerHTML = area.traits.a;
    areaFeature[1].innerHTML = area.traits.b;
    areaFeature[2].innerHTML = area.traits.c;
    areaFeature[3].innerHTML = area.traits.d;
}

var haarlemArea = document.querySelector('#haarlem');
var newLandArea = document.querySelector('#newLand');
var greenArea = document.querySelector('#green');
var centreArea = document.querySelector('#centre');
var airportArea = document.querySelector('#airport');
var harbourArea = document.querySelector('#harbour');
var beachArea = document.querySelector('#beach');
var northArea = document.querySelector('#north');

/* Image gallery */

var slideIndex = 1;
//showSlides(slideIndex);

function plusSlides(n) {
    showSlides(slideIndex += n);
}

function currentSlide(n) {
    showSlides(slideIndex = n);
    showContent();
}

function showSlides(n) {
    var slides = document.getElementsByClassName("living-gallery__image");
    if (n > slides.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = slides.length }
    for (var i = 0; i < slides.length; i++) {
        slides[i].style.opacity = "0";
    }
    slides[slideIndex - 1].style.opacity = "1";
}

document.querySelector(".next").addEventListener("click", function (event) {
    showSlides(slideIndex += 1);
});

document.querySelector(".prev").addEventListener("click", function (event) {
    showSlides(slideIndex += -1);
});

/* Show images */

var livingGallery = document.querySelector('.living-gallery__main');
var close = document.querySelector('.living-gallery__close');

function showContent() {
    slideIndex = 1;
    showSlides(1);
    livingGallery.style.display = 'block';
    close.style.display = 'block';
}

function showThumb(n) {
    slideIndex = n;
    showSlides(n);
    livingGallery.style.display = 'block';
    close.style.display = 'block';
}

function closeGallery() {
    livingGallery.style.display = 'none';
    close.style.display = 'none';
}

var entireArea = document.querySelectorAll(".living-map__area");

for (var i = 0; i < entireArea.length; i++) { entireArea[i].addEventListener('click', function (event) { showContent(); }); };

close.addEventListener('click', closeGallery);

/* Reset map */

var mapContent = document.querySelector('.living-map__content');

function resetContent() {
    if (livingGallery.style.display === 'none') {
        darkLayer.style.display = "none";
    }
}
mapContent.addEventListener("mouseleave", function (event) { resetContent(); });

/* Touch Content */

function touchContent(area) {
    changeContent(area);
    slideIndex = 1;
    showSlides(1);
    livingGallery.style.display = 'block';
    close.style.display = 'block';
    close.style.background = "rgba(0,0,0,.25)";
    close.style.borderColor = "rgba(255,255,255,.1)";
    close.style.boxShadow = "0px 0px 8px 0px rgba(0,0,0,0.05), inset 0px 0px 1px 0px rgba(255,255,255,0.75)";
}

if (haarlemArea) {
    haarlemArea.addEventListener("mouseenter", function (event) { changeContent(places.haarlem); });
    haarlemArea.addEventListener("touchstart", function (event) { touchContent(places.haarlem); });
}

if (newLandArea) {
    newLandArea.addEventListener("mouseenter", function (event) { changeContent(places.amsterdamNewLand); });
    newLandArea.addEventListener("touchstart", function (event) { touchContent(places.amsterdamNewLand); });
}
if (greenArea) {
    greenArea.addEventListener("mouseenter", function (event) { changeContent(places.greenAmsterdam); });
    greenArea.addEventListener("touchstart", function (event) { touchContent(places.greenAmsterdam); });
}
if (centreArea) {
    centreArea.addEventListener("mouseenter", function (event) { changeContent(places.amsterdamCentre); });
    centreArea.addEventListener("touchstart", function (event) { touchContent(places.amsterdamCentre); });
}
if (airportArea) {
    airportArea.addEventListener("mouseenter", function (event) { changeContent(places.airportCity); });
    airportArea.addEventListener("touchstart", function (event) { touchContent(places.airportCity); });
}
if (harbourArea) {
    harbourArea.addEventListener("mouseenter", function (event) { changeContent(places.amsterdamHarbour); });
    harbourArea.addEventListener("touchstart", function (event) { touchContent(places.amsterdamHarbour); });
}
if (beachArea) {
    beachArea.addEventListener("mouseenter", function (event) { changeContent(places.amsterdamBeach); });
    beachArea.addEventListener("touchstart", function (event) { touchContent(places.amsterdamBeach); });
}
if (northArea) {
    northArea.addEventListener("mouseenter", function (event) { changeContent(places.northOfAmsterdam); });
    northArea.addEventListener("touchstart", function (event) { touchContent(places.northOfAmsterdam); });
}


/* Don't interact with next/prev buttons after touch on Android */

newLandArea.addEventListener("touchend", function (event) { event.preventDefault(); });
beach.addEventListener("touchend", function (event) { event.preventDefault(); });